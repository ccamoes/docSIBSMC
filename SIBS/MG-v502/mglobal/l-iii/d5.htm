<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta http-equiv="content-type" content="text/html" ; charset="ISO-8859-1">
<base target="explicac">
<link REL="StyleSheet" HREF="../main.css" TYPE="text/css">
<script>top.captulos.location='indiced.htm#D';</script>
<style>
<!--
BODY, H1, H2, H3, H4, H5, H6, OL, UL, P, TH, TD {
	color: #006400;
}
-->
</style>
<title>D.5 MENSAGENS WEB-BASED</title>
</head>

<body>

<h1>D.5 MENSAGENS WEB-BASED</h1>

<p>&nbsp;</p>

<p>Neste capítulo descrevem-se as mensagens trocadas entre Servidores WEB na SIBS e Servidores WEB de diferentes entidades.&nbsp;</p>
<p>Estas mensagens, designadas no Sistema MB por Web-Based, são trocadas no âmbito da utilização do Sistema de Autenticação Forte (SAF).&nbsp;</p>
<p>Para informação relativa à descrição e operativa da Autenticação Forte, consultar o capítulo
<a href="../l-ii/d3.htm" target="main"> D.3</a> - Autenticação Forte, do Livro II.</p>

<p>&nbsp;</p>

<h2><a name="D.5.1">D.5.1</a> ESTRUTURA DAS MENSAGENS </h2>

<p><br>
A forma de interacção entre o Servidor WEB da entidade e o Servidor WEB da SIBS baseia-se na troca de mensagens
<i>real-time</i>, utilizando protocolo HTTPS - método POST.&nbsp;</p>

<p><b><br>
Mensagens de Pedido</b></p>

<p>Estas mensagens são compostas por um conjunto de elementos, consultáveis no ponto
<a href="#D.5.2" target="main">D.5.2</a>.<br>
Entre os elementos da mensagem deve existir o caracter ‘;’ (código ASCII = 3B h).&nbsp;<br>
Para os campos de preenchimento opcional que não estejam presentes na mensagem, é colocado apenas o separador ‘;’.&nbsp;<br>
Alguns dos campos das mensagens têm dimensão variável.&nbsp;</p>

<p><b><br>
Mensagens de Resposta</b></p>

<p>A mensagem de resposta é colocada na primeira linha do conteúdo da resposta HTTP, sem separador e com
<i> newline</i> a finalizar (ou seja, não segue o HTML). O HTTP<i> Status Code</i> devolvido é
<b> 200 OK</b>. Caso existam erros que não permitam reconhecer uma mensagem de pedido como válida
é devolvido um HTTP<i> Status Code <b> 400 Bad Request</b></i>, sem mais nenhum dado adicional de informação.</p>

<p>&nbsp;</p>

<h2><a name="D.5.2">D.5.2</a> DESCRIÇÃO DAS MENSAGENS</h2>

<p><br>
As mensagens previstas destinam-se a diferentes tipos de entidades:</p>

<ul>
  <li>participantes no Sistema MB na qualidade de Emissores de Cartões;&nbsp;</li>
  <li>outras Entidades Externas (<i>E-Government</i>).</li>
</ul>

<p>&nbsp;</p>

<h3 ><a name="D.5.2.1">D.5.2.1</a> MENSAGENS PARA EMISSORES DE CARTÕES</h3>

<p><br>
Estas mensagens utilizam como elemento identificador do utilizador o PAN de um cartão.&nbsp;</p>

<p>A mensagem de Pedido de Autenticação é enviada pelo Emissor ao SAF para ser validado o
<i> token</i> CAP.</p>

<ul class="bullet">
  <li><a target="main" href="../../MSG/msg/c101.htm">C101/C201</a> - Mensagem de
    Autenticação (Emissor) </li>
</ul>

<p>&nbsp;&nbsp;</p>

<h3 ><a name="D.5.2.2">D.5.2.2</a> MENSAGENS PARA ENTIDADES EXTERNAS</h3>

<p><br>
Estas mensagens utilizam como elemento identificador do utilizador o NIF do utilizador.&nbsp; </p>

<p>A mensagem de Pedido de Autenticação é enviada pela Entidade Externa ao Emissor representante ou ao SAF (cenário
<i>E-Government</i>) para ser validado o <i> token</i> CAP.&nbsp;<br>
No caso de ser enviada ao Emissor representante, esta mensagem pode, se o cartão usado for um cartão emitido pelo próprio emissor, ser convertida numa
<a target="main" href="../../MSG/msg/c101.htm">C101</a> e enviada ao SAF por este, sendo a resposta convertida em sentido contrário. Neste cenário os dois NIF e os últimos 4 algarismos do PAN, se
presentes, são substituídos pelo PAN completo do cartão. </p>

<ul class="bullet">
  <li><a target="main" href="../../MSG/msg/c102.htm">C102/C202</a> - Mensagem de
    Autenticação (Entidade Externa) </li>
</ul>

<p class="dta"><br>
<a href="d4.htm" target="main">Anterior</a></p>

<p></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

</body>
</html>
